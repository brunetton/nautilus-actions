{
	"$schema": "https://raw.githubusercontent.com/bassmanitram/actions-for-nautilus/refs/heads/main/configurator/actions-for-nautilus.schema.json",
	"actions": [
		{
			"type": "command",
			"label": "ü™Ñ Convert to webp - lossless",
			"command_line": "mogrify -format webp -quality 100 %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to webp - 80%",
			"command_line": "mogrify -format webp -quality 80 %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to webp - 60%",
			"command_line": "mogrify -format webp -quality 60 %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to webp - 30%",
			"command_line": "mogrify -format webp -quality 30 %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to jpg - 80%",
			"command_line": "mogrify -format jpg -quality 80 %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚è¨ Layer images (up down)",
			"command_line": "convert %F -background black -gravity center -append $(mktemp \"out-XXX.%x\")",
			"min_items": 2,
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚è¨ Layer images (up down) - REVERSED",
			"command_line": "convert $(echo %F | tr ' ' '\n' | tac) -background black -gravity center -append $(mktemp \"out-XXX.%x\")",
			"min_items": 2,
			"use_shell": true,
			"cwd": "%d"
		},
		{
			"type": "command",
			"label": "‚è¨ Layer images (2 by 2)",
			"command_line": "convert %F -background black -gravity center -append $(mktemp \"out-XXX.%x\")",
			"min_items": 2,
			"max_items": 2,
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚ùå Remove exif data",
			"command_line": "exiftool -all= %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to PNG (300 dpi)",
			"command_line": "pdftoppm -png -r 300 %f %w",
			"use_shell": false,
			"cwd": "%d",
			"mimetypes": [
				"application/pdf"
			]
		},
		{
			"type": "command",
			"label": "üé• Extract sound from video",
			"command_line": "~/dev/nemo-actions/scripts/extract_sound.py %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"video/*"
			]
		},
		{
			"type": "command",
			"label": "üé• Create GIF from video",
			"command_line": "ffmpeg -i %f -vf \"fps=10,scale=480:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse\" %w.gif",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"video/*"
			]
		},
		{
			"type": "command",
			"label": "ü™Ñ Convert to PNG",
			"command_line": "mogrify -format png %f",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚û°Ô∏è Convert to FLAC",
			"command_line": "flac %b --best -o %w.flac && rm -f %b",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"audio/*"
			]
		},
		{
			"type": "command",
			"label": "‚û°Ô∏è Convert to WAV",
			"command_line": "out=%w.wav; rm -f \"$out\"; ffmpeg -i %f -b:a 96k \"$out\"",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"audio/*"
			]
		},
		{
			"type": "menu",
			"label": "‚û°Ô∏è aac",
			"actions": [
				{
					"type": "command",
					"label": "Convert audio to AAC 96k",
					"command_line": "out=%w.aac; rm -f \"$out\"; ffmpeg -i %f -b:a 96k \"$out\"",
					"use_shell": true,
					"cwd": "%d",
					"max_items": 1,
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert audio to AAC 128k",
					"command_line": "out=%w.aac; rm -f \"$out\"; ffmpeg -i %f -b:a 128k \"$out\"",
					"use_shell": true,
					"cwd": "%d",
					"max_items": 1,
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert audio to AAC 192k",
					"command_line": "out=%w.aac; rm -f \"$out\"; ffmpeg -i %f -b:a 192k \"$out\"",
					"use_shell": true,
					"cwd": "%d",
					"max_items": 1,
					"mimetypes": [
						"audio/*"
					]
				}
			]
		},
		{
			"type": "menu",
			"label": "‚û°Ô∏è mp3",
			"actions": [
				{
					"type": "command",
					"label": "Convert to mp3 - 96 kbps (< CD) - mono",
					"command_line": "<scripts/bash_action.rb \"lame -V2 --abr 96 -a -m m {}\" %f>",
					"use_shell": true,
					"cwd": "%d",
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert to mp3 - 96 kbps (< CD)",
					"command_line": "lame -V2 --abr 96 %f %w.mp3",
					"use_shell": true,
					"cwd": "%d",
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert to mp3 - 128 kbps (< CD)",
					"command_line": "lame -V2 --abr 128 %f %w.mp3",
					"use_shell": true,
					"cwd": "%d",
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert to mp3 - 192 kbps",
					"command_line": "lame -V2 --abr 192 %f %w.mp3",
					"use_shell": true,
					"cwd": "%d",
					"mimetypes": [
						"audio/*"
					]
				},
				{
					"type": "command",
					"label": "Convert to mp3 - 256 kbps",
					"command_line": "lame -V2 --abr 256 %f %w.mp3",
					"use_shell": true,
					"cwd": "%d",
					"mimetypes": [
						"audio/*"
					]
				}
			]
		},
		{
			"type": "command",
			"label": "üìÑ New file...",
			"command_line": "FN=$(zenity --entry --text \"Enter file name\"  --width 300) && touch \"${FN}\"",
			"cwd": "%f",
			"use_shell": true,
			"max_items": 1,
			"permissions": "read-write",
			"filetypes": [
				"directory"
			]
		},
		{
			"type": "command",
			"label": "‚ñ∂Ô∏è‚óÄÔ∏è Resize 1200px",
			"command_line": "if [ %c -eq 1 ]; then convert %f -resize \"1200x1200>\" %d/%w-1200.%x; else rm -rf %d/resized_images; mkdir %d/resized_images; mogrify -resize \"1200>\" -path %d/resized_images %f; fi",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚ñ∂Ô∏è‚óÄÔ∏è Resize 1500px",
			"command_line": "if [ %c -eq 1 ]; then convert %f -resize \"1500x1500>\" %d/%w-1500.%x; else rm -rf %d/resized_images; mkdir %d/resized_images; mogrify -resize \"1500>\" -path %d/resized_images %f; fi",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚ñ∂Ô∏è‚óÄÔ∏è Resize 2000px",
			"command_line": "if [ %c -eq 1 ]; then convert %f -resize \"2000x2000>\" %d/%w-2000.%x; else rm -rf %d/resized_images; mkdir %d/resized_images; mogrify -resize \"2000>\" -path %d/resized_images %f; fi",
			"use_shell": true,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚ñ∂Ô∏è‚óÄÔ∏è Resize 70%",
			"command_line": "convert %f -resize \"70%\" %d/%w-70pct.%x",
			"use_shell": true,
			"max_items": 1,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "command",
			"label": "‚ñ∂Ô∏è‚óÄÔ∏è Resize 50%",
			"command_line": "convert %f -resize \"50%\" %d/%w-50pct.%x",
			"use_shell": true,
			"max_items": 1,
			"cwd": "%d",
			"mimetypes": [
				"image/*"
			]
		},
		{
			"type": "menu",
			"label": "Folder Actions",
			"actions": [
				{
					"type": "command",
					"label": "Remove \"node modules\" dirs",
					"command_line": "find %d -name node_modules -type d -prune -exec rm -rf '{}' +",
					"use_shell": true,
					"cwd": "%d",
					"max_items": 1,
					"mimetypes": [
						"inode/directory"
					]
				},
				{
					"type": "command",
					"label": "Execute command here",
					"command_line": "$(zenity --entry --text \"Enter command\" --title \"execute command in %f\" --width 800)",
					"use_shell": true,
					"cwd": "%f",
					"max_items": 1,
					"filetypes": [
						"directory"
					]
				},
				{
					"type": "command",
					"label": "Start HTTP server here",
					"command_line": "gnome-terminal -t \"HTTP Server on %f\" -- python3 -m http.server --bind 127.0.0.1",
					"cwd": "%f",
					"max_items": 1,
					"mimetypes": [
						"inode/directory"
					]
				}
			]
		},
		{
			"type": "menu",
			"label": "üìù Copy details",
			"actions": [
				{
					"type": "command",
					"label": "Copy full path (~/truc.pdf)",
					"command_line": "echo -n %F | xclip -f -selection primary | xclip -selection clipboard",
					"use_shell": true
				},
				{
					"type": "command",
					"label": "Copy basename (truc.pdf)",
					"command_line": "echo -n %B | xclip -f -selection primary | xclip -selection clipboard",
					"use_shell": true
				},
				{
					"type": "command",
					"label": "Copy path only (~/)",
					"command_line": "echo -n %D | xclip -f -selection primary | xclip -selection clipboard",
					"use_shell": true
				},
				{
					"type": "command",
					"label": "Copy URI",
					"command_line": "echo -n %U | xclip -f -selection primary | xclip -selection clipboard",
					"use_shell": true
				}
			]
		},
		{
			"type": "command",
			"label": "üì• Move last downloaded file here",
			"command_line": "mv \"$(/bin/ls -tpd ~/T√©l√©chargements/* | grep -v '/$' | head -n 1)\" %f",
			"use_shell": true,
			"max_items": 1,
			"filetypes": [
				"directory"
			]
		}
	],
	"debug": true
}